@using Licorera.Models
@model UsuarioCLS
@{
    Layout = null;
}


<html>
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/css/bootstrap.min.css" integrity="sha384-r4NyP46KrjDleawBgD5tp8Y7UzmLA05oM1iAEQ17CSuDqnUK2+k9luXQOfXJCJ4I" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Spartan:wght@300;600&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/ffec4ec2ed.js" crossorigin="anonymous"></script>
    <style>


        :root {
            --dark: #16191C;
            --dark-x: #1E2126;
            --light: #ffffff;
        }

        body {
            font-family: 'Spartan', sans-serif;
            font-weight: 300;
            color: var(--light);
            background: rgb(6,5,3);
            background: linear-gradient(90deg, rgba(6,5,3,1) 59%, rgba(43,26,14,1) 84%, rgba(51,29,9,1) 88%, rgba(66,40,18,1) 91%, rgba(80,47,10,1) 94%, rgba(117,66,17,1) 99%);
        }

        .text-light {
            color: var(--light) !important;
        }

       


        .btn {
            min-height: 3.125rem;
            font-weight: 600;
        }

        .form-control {
            min-height: 3.125rem;
            line-height: initial;
        }

            .form-control:focus {
                background-color: var(--dark-x);
                outline: none;
            }

        .img-1 {
            background-image: url('../../img-1.jpg');
          
            background-size: cover;
            background-position: center;
        }

        .img-2 {
            
            background-image: url('../../Resources/cava_3.JPG');
            background-size: cover;
            background-position: center;
        }


    </style>
    

    <title>Color y Cuerpo</title>
</head>
<body >
    <section>
        <div class="row g-0">
            <div class="col-lg-7 d-none d-lg-block">
                <div id="carouselExampleCaptions" class="carousel slide" data-ride="carousel">
                    <ol class="carousel-indicators">
                        <li data-target="#carouselExampleCaptions" data-slide-to="0" class="active"></li>
                        <li data-target="#carouselExampleCaptions" data-slide-to="1"></li>
                    </ol>
                    <div class="carousel-inner">
                        <div class="carousel-item img-1 min-vh-100 active">
                            <div class="carousel-caption d-none d-md-block">
                                <h5 class="font-weight-bold">Gran variedad de destilados</h5>
                                <a class="text-muted text-decoration-none">Visita nuestra tienda</a>
                            </div>
                        </div>
                        <div class="carousel-item img-2 min-vh-100">
                            <div class="carousel-caption d-none d-md-block">
                                <h5 class="font-weight-bold">Descubre nuestra gama de vinos</h5>
                                <a class="text-muted text-decoration-none">Visita nuestra tienda</a>
                            </div>
                        </div>
                    </div>
                    <a class="carousel-control-prev" href="#carouselExampleCaptions" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#carouselExampleCaptions" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
            </div>
            <div class="col-lg-5  d-flex flex-column align-items-end min-vh-100">
                <div class="px-lg-5 pt-lg-4 pb-lg-3 p-4 mb-auto w-100">
                    <img src="Logo.svg" class="img-fluid" />
                    <h2>Color y cuerpo</h2>
                </div>
                <div class="align-self-center w-100 px-lg-5 py-lg-4 p-4">
                    <h1 class="font-weight-bold mb-4">Bienvenido</h1>
                    <div class="mb-5">
                        @using (Ajax.BeginForm("Login", "Login", "", new AjaxOptions
                        {

                            HttpMethod = "POST",
                            OnSuccess = "Ingresar",
                            UpdateTargetId = "divRespuesta"

                        }, new { @id = "frmLogin" })) {


                        <div class="mb-4">
                            <label for="exampleInputEmail1" class="form-label font-weight-bold">Nombre de Usuario</label>
                            @Html.TextBox("nombre", null, new {@id= "exampleInputEmail1", @class = "form-control bg-dark-x border-0", @placeholder = "Ingrese el nombre de usuario", @required = "true" })
                           
                        </div>
                        <div class="mb-4">
                            <label for="exampleInputPassword1" class="form-label font-weight-bold">Contraseña</label>
                            
                            @Html.Password("passwword", null, new { @id = "exampleInputPassword1", @class = "form-control bg-dark-x border-0", @placeholder = "Ingresa tu contraseña", @required = "true" })
                            <a id="btnOlvideContra" class="form-text text-muted text-decoration-none" data-toggle="modal" data-target="#exampleModal">¿Has olvidado tu contraseña?</a>
                        </div>
                        <button type="submit" class="btn btn-info w-100">Iniciar sesión</button>

                        <div id="divRespuesta"></div>
                        }
                    </div>

                       
                </div>
                <div class="text-center px-lg-5 pt-lg-3 pb-lg-4 p-4 mt-auto w-100">
                    <p class="d-inline-block mb-0">¿Todavia no tienes una cuenta?</p>@Html.ActionLink("Crea una ahora ", "Registrarse", "Login", new { @class= "text-light font-weight-bold text-decoration-none" })
                </div>
            </div>
        </div>


        <!-- Modal -->
        <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    @using (Ajax.BeginForm("RecuperarContra", "Login", null, new AjaxOptions
                    {
                        HttpMethod = "POST",
                        OnSuccess = "Recuperar",
                        UpdateTargetId = "error"
                    }))
                    {
                        @Html.Hidden("titulo")
                        <div class="modal-body">

                            <div>
                                @Html.Label("Correo", new { @class = "text-info" })
                                @Html.TextBox("correo", null, new { @class = "form-control text-info", @type = "email" })
                            </div>
                          

                        </div>
                        <div class="modal-footer">
                            <button type="button" id="btnClose" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                            <button type="submit" class="btn btn-primary">Guardar</button>
                        </div>
                    }
                    <div id="error"></div>
                </div>
            </div>
        </div>

    </section>
    <!-- Optional JavaScript -->
    <!-- Popper.js first, then Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/js/bootstrap.min.js" integrity="sha384-oesi62hOLfzrys4LxRF63OJCXdXDipiYWBnvTl9Y9/TRlw5xlKIEHpNyvvDShgf/" crossorigin="anonymous"></script>
    <script src="~/Scripts/jquery-1.10.2.min.js"></script>
    <script src="~/scripts/jquery.unobtrusive-ajax.js"></script>
    <script src="~/scripts/bootstrap.min.js"></script>
</body>
</html>


<script>

    function Recuperar(rpta) {
        if (rpta == "1") {

            alert("Se ha enviado la nueva contraseña a tu correo");
            document.getElementById("btnClose").click(); 
        } else {

            alert("Ocurrio un error"); 

        }


    }

    function Ingresar(mensaje) {
        console.log("Entre");
        if (mensaje == "1") {
            document.location.href = "@Url.Action("Index", "Usuario")";
            document.getElementById("divRespuesta").innerHTML = "";
        } else {
            alert("Usuario o contraseña incorrecta");
        }

    }

</script>